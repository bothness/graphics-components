{"version":3,"file":"NavSections.stories-5eee9e56.js","sources":["../../src/layout/NavSections/docs/component.md?raw","../../src/layout/NavSections/NavSections.svelte","../../src/layout/NavSections/SectionBacklink.svelte","../../src/layout/NavSections/NavSection.svelte","../../src/layout/NavSections/NavSections.stories.svelte"],"sourcesContent":["export default \"Use this layou component to allow users to quickly jump to sections of a long page of content.\\n\\nAs the user scrolls down the page, the table of contents will remain accessible at the top of the viewport and will highlight the subheading of the section in view.\\n\\nNote: These examples will not preview correctly in the iframes on this page. You can select the examples from the menu instead.\\n\\n<!-- prettier-ignore -->\\n```html\\n<script>\\n  import { NavSections, NavSection } from \\\"@onsvisual/svelte-components\\\";\\n</script>\\n\\n<NavSections>\\n  <NavSection title=\\\"Section one\\\">\\n    <p>Contents of first section.</p>\\n  </NavSection>\\n  <NavSection title=\\\"Section two\\\">\\n    <p>Contents of second section.</p>\\n  </NavSection>\\n  <NavSection title=\\\"Section three\\\">\\n    <p>Contents of third section.</p>\\n  </NavSection>\\n</NavSections>\\n```\\n\"","<script>\n  import { onMount, setContext } from \"svelte\";\n  import { writable } from \"svelte/store\";\n\n  /**\n   * A label for the page contents nav\n   * @type {string}\n   */\n  export let contentsLabel = \"Page contents\";\n  /**\n   * ID for contents nav section (for back links)\n   * @type {string}\n   */\n  export let tocId = \"toc\";\n  /**\n   * Don't include table of contents (allows for custom uses of nav panel)\n   * @type {boolean}\n   */\n  export let noContents = false;\n\n  let active;\n\n  setContext(\"tocId\", tocId);\n\n  const sections = writable([]);\n  setContext(\"sections\", sections);\n\n  const observer = writable();\n  setContext(\"observer\", observer);\n\n  onMount(() => {\n    if (!noContents) {\n      $observer = new IntersectionObserver(\n        (entries, observer) => {\n          for (let i = 0; i < entries.length; i++) {\n            if (entries[i].isIntersecting) {\n              active = entries[i].target.id;\n              break;\n            }\n          }\n        },\n        {\n          root: null,\n          rootMargin: `0% 0% -70% 0%`,\n          threshold: 0,\n        }\n      );\n    }\n  });\n</script>\n\n<div class=\"ons-page__container ons-container\">\n  <div class=\"ons-grid ons-js-toc-container ons-u-ml-no\">\n    <slot name=\"header\" />\n    <div class=\"ons-grid__col ons-col-4@m ons-u-pl-no ons-grid__col--sticky@m\" id=\"{tocId}\">\n      <aside class=\"ons-toc-container\" role=\"complementary\">\n        <nav class=\"ons-toc\" aria-label=\"Pages in this guide\">\n          <slot name=\"before-nav\" />\n          {#if !noContents}\n            {#if contentsLabel}\n              <h2 class=\"ons-toc__title ons-u-fs-r--b ons-u-mb-s\">\n                {contentsLabel}\n              </h2>\n            {/if}\n            <ol class=\"ons-list ons-u-mb-m ons-list--dashed\">\n              {#each $sections as section}\n                <li class=\"ons-list__item\">\n                  <a\n                    href=\"#{section.id}\"\n                    class=\"ons-list__link\"\n                    class:ons-toc__link-active=\"{section.id === active}\"\n                  >\n                    {section.title}\n                  </a>\n                </li>\n              {/each}\n            </ol>\n          {/if}\n          <slot name=\"after-nav\" />\n        </nav>\n      </aside>\n    </div>\n    <div class=\"ons-grid__col ons-col-8@m ons-u-pl-no\">\n      <slot name=\"before\" />\n      {#if $observer}\n        <slot />\n      {/if}\n      <slot name=\"after\" />\n    </div>\n    <slot name=\"footer\" />\n  </div>\n</div>\n","<script>\n  /**\n   * ID for contents nav section (for back links)\n   * @type {string}\n   */\n  export let tocId = \"toc\";\n</script>\n\n<div class=\"ons-u-mt-l ons-u-d-no@m\">\n  <div class=\"ons-back-to\">\n    <a href=\"#{tocId}\" class=\"ons-back-to__link\">\n      <span class=\"ons-back-to__icon\"\n        ><svg\n          class=\"ons-svg-icon ons-u-mr-xs\"\n          width=\"16\"\n          height=\"17\"\n          viewBox=\"0 0 16 17\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          focusable=\"false\"\n          aria-hidden=\"true\"\n          role=\"presentation\"\n        >\n          <path\n            d=\"M0 8.07275L1.41 9.48275L7 3.90275V16.0728H9V3.90275L14.58 9.49275L16 8.07275L8 0.0727539L0 8.07275Z\"\n            fill=\"currentColor\"></path>\n        </svg>\n      </span>Back to contents</a\n    >\n  </div>\n</div>\n","<script>\n  import { onMount, onDestroy, getContext } from \"svelte\";\n  import { slugify } from \"../../js/utils.js\";\n  import SectionBacklink from \"./SectionBacklink.svelte\";\n\n  /**\n   * Sets the title of the section\n   * @type {string}\n   */\n  export let title = \"Section title\";\n  /**\n   * Sets the unique ID of the section (if not set, this will be slugified from the title)\n   * @type {string}\n   */\n  export let id = slugify(title);\n  /**\n   * Allows the h2 title tag for the section to be visually hidden\n   * @type {boolean}\n   */\n  export let hideTitle = false;\n\n  const sections = getContext(\"sections\");\n  const observer = getContext(\"observer\");\n  const tocId = getContext(\"tocId\");\n\n  let section;\n\n  onMount(() => {\n    if (sections && observer) {\n      $sections = [...$sections, { title, id }];\n      $observer.observe(section);\n    }\n  });\n\n  onDestroy(() => {\n    if (sections && observer) {\n      $sections = $sections.filter((s) => s.id !== id);\n      $observer.unobserve(section);\n    }\n  });\n</script>\n\n<section id=\"{id}\" aria-label=\"{title}\" bind:this=\"{section}\">\n  {#if title}\n    <h2 class=\"ons-u-mt-xl ons-u-pb-no ons-u-pt-no\" class:ons-u-vh=\"{hideTitle}\">{title}</h2>\n  {/if}\n  <slot />\n  {#if tocId}\n    <SectionBacklink tocId=\"{tocId}\" />\n  {/if}\n</section>\n","<script>\n  import { Meta, Template, Story } from \"@storybook/addon-svelte-csf\";\n\n  // @ts-ignore\n  import componentDocs from \"./docs/component.md?raw\";\n  import NavSections from \"./NavSections.svelte\";\n  import NavSection from \"./NavSection.svelte\";\n  import { withComponentDocs } from \"../../js/withParams.js\";\n</script>\n\n<Meta\n  title=\"Layout/NavSections\"\n  component=\"{NavSections}\"\n  argTypes=\"{{}}\"\n  {...withComponentDocs(componentDocs)}\n/>\n\n<Template let:args>\n  <NavSections>\n    <NavSection title=\"Section one\">\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in\n        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n      </p>\n    </NavSection>\n    <NavSection title=\"Section two\">\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in\n        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n      </p>\n    </NavSection>\n    <NavSection title=\"Section three\">\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in\n        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n      </p>\n    </NavSection>\n  </NavSections>\n</Template>\n\n<Story name=\"Default\" args=\"{{}}\" />\n"],"names":["componentDocs","ctx","create_if_block_2","i","insert","target","ol","anchor","h2","t0_value","attr","a","a_href_value","li","append","dirty","set_data","t0","create_if_block_1","create_if_block","div3","div2","div0","aside","nav","div1","contentsLabel","$$props","tocId","noContents","active","setContext","sections","writable","observer","onMount","$observer","entries","$$invalidate","span","section_1","if_block1","title","id","slugify","hideTitle","getContext","section","set_store_value","$sections","onDestroy","s","$$value","p","NavSections","withComponentDocs","get_spread_object"],"mappings":"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"}